import{o as n,h as i,i as l,j as a}from"./app.min.js";import"./reviewCart.min.js";class r{#t=!1;#s=!1;#o=!1;#i=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];selectorOpen=!1;youTubeCode=null;hash=null;dataValue=null;lastFocusElement=null;targetOpen={selector:null,element:null};previousOpen={selector:null,element:null};lastClosed={selector:null,element:null};constructor(t={}){let e={logging:!0,init:!0,focusCatch:!0,closeEsc:!0,bodyLock:!0,setAutoplayYoutube:!0,hashSettings:{location:!0,goHash:!0},on:{beforeOpen:()=>{},afterOpen:()=>{},beforeClose:()=>{},afterClose:()=>{}}};this.modalClasses={modal:"modal",modalWrapper:"modal__wrapper",modalContent:"modal__content",modalActive:"modal--show",bodyActive:"modal-show"},this.modalAttributes={openButton:"data-modal",closeButton:"data-close",fixElementSelector:"[data-lp]",youtube:"data-modal-youtube",youtubePlace:"data-modal-youtube-place"},this.options={...e,...t,hashSettings:{...e.hashSettings,...t?.hashSettings},on:{...e.on,...t?.on}},this.options.init&&this.initModals()}initModals(){this.#e("Initializing a modal window"),this.eventsModal()}eventsModal(){document.addEventListener("click",t=>{const e=t.target.closest(`[${this.modalAttributes.openButton}]`),s=t.target.closest(`[${this.modalAttributes.closeButton}]`),o=!t.target.closest(`.${this.modalClasses.modalContent}`)&&this.#t;if(e){if(t.preventDefault(),this.dataValue=e.getAttribute(this.modalAttributes.openButton)||"error",this.dataValue==="error"){this.#e(`The attribute is not filled ${e.classList}`);return}this.#t||(this.lastFocusElement=e),this.youTubeCode=e.getAttribute(this.modalAttributes.youtube)||null,this.targetOpen.selector=`${this.dataValue}`,this.selectorOpen=!0,this.open();return}if(s||o){t.preventDefault(),this.close();return}}),document.addEventListener("keydown",t=>{if(this.#t){if(this.options.closeEsc&&t.key==="Escape"){t.preventDefault(),this.close();return}if(this.options.focusCatch&&t.key==="Tab"){this.#d(t);return}}}),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",()=>{window.location.hash?this.#n():this.close(this.targetOpen.selector)}),window.addEventListener("load",()=>{window.location.hash&&this.#n()}))}open(t){if(i){if(this.#o=!!(document.documentElement.classList.contains("lock")&&!this.#t),t&&typeof t=="string"&&t.trim()!==""&&(this.targetOpen.selector=t,this.selectorOpen=!0),this.#t&&(this.#s=!0,this.close()),this.selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this.targetOpen.element=document.querySelector(this.targetOpen.selector),!this.targetOpen.element){this.#e("Modal not found. Check the selector.");return}if(this.youTubeCode){const e=document.createElement("iframe"),s=this.options.setAutoplayYoutube?"1":"0",o=this.options.setAutoplayYoutube?"1":"0";e.setAttribute("width","560"),e.setAttribute("height","315"),e.setAttribute("title","YouTube video player"),e.setAttribute("allowfullscreen",""),e.setAttribute("frameborder","0"),e.setAttribute("loading","lazy"),e.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),e.setAttribute("allow",`${this.options.setAutoplayYoutube?"autoplay;":""} accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share`),e.setAttribute("src",`https://www.youtube.com/embed/${this.youTubeCode}?rel=0&modestbranding=1&autoplay=${s}&mute=${o}`),this.targetOpen.element.querySelector(`[${this.modalAttributes.youtubePlace}]`)?.appendChild(e)}this.options.hashSettings.location&&(this.#a(),this.#u()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforeModalOpen",{detail:{modal:this}})),this.targetOpen.element.classList.add(this.modalClasses.modalActive),document.documentElement.classList.add(this.modalClasses.bodyActive),this.#s?this.#s=!1:this.#o||l(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen={...this.targetOpen},this.selectorOpen=!1,this.#t=!0,setTimeout(()=>this.#l(),50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterModalOpen",{detail:{modal:this}})),this.#e("Open modal window")}}close(t){!this.#t||!i||(t&&typeof t=="string"&&t.trim()!==""&&(this.previousOpen.selector=t),this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforeModalClose",{detail:{modal:this}})),this.youTubeCode&&(this.targetOpen.element.querySelector(`[${this.modalAttributes.youtubePlace}]`)&&(this.targetOpen.element.querySelector(`[${this.modalAttributes.youtubePlace}]`).innerHTML=""),this.youTubeCode=null),this.previousOpen.element.classList.remove(this.modalClasses.modalActive),this.#s||(document.documentElement.classList.remove(this.modalClasses.bodyActive),this.#o||a(),this.#t=!1),setTimeout(()=>{this.#l(),this.previousOpen.element.setAttribute("aria-hidden","true")},50),this.#h(),this.selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterModalClose",{detail:{modal:this}})),this.#e("Close modal window"))}#a(){this.hash=this.targetOpen.selector.includes("#")?this.targetOpen.selector:this.targetOpen.selector.replace(".","#")}#n(){const t=this.#r(),e=document.querySelector(`[${this.modalAttributes.openButton} = "${t}"]`)?document.querySelector(`[${this.modalAttributes.openButton} = "${t}"]`):document.querySelector(`[${this.modalAttributes.openButton} = "${t.replace(".","#")}"]`);this.youTubeCode=e.getAttribute(this.modalAttributes.youtube)||null,e&&t&&this.open(t)}#r(){if(document.querySelector(`.${window.location.hash.replace("#","")}`))return`.${window.location.hash.replace("#","")}`;if(document.querySelector(`${window.location.hash}`))return`${window.location.hash}`}#u(){history.pushState("","",this.hash)}#h(){history.pushState("","",window.location.href.split("#")[0])}#d(t){const e=[...this.targetOpen.element.querySelectorAll(this.#i)],s=e.indexOf(document.activeElement);t.shiftKey&&s===0&&(e[e.length-1].focus(),t.preventDefault()),!t.shiftKey&&s===e.length-1&&(e[0].focus(),t.preventDefault())}#l(){const t=this.previousOpen.element.querySelectorAll(this.#i);this.lastFocusElement||(this.lastFocusElement=document.querySelectorAll(this.#i)[0]),!this.#t&&this.lastFocusElement?this.lastFocusElement.focus():t.length&&t[0].focus()}#e(t){this.options.logging}}document.querySelector("[data-modal]")&&(n.modal=new r({}));
